<div id="article_content" class="article_content clearfix">
    <link rel="stylesheet" href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/kdoc_html_views-1a98987dfd.css">
    <link rel="stylesheet" href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/ck_htmledit_views-704d5b9767.css">
         
            <div id="content_views" class="markdown_views prism-atom-one-dark">
                <svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
                    <path stroke-linecap="round" d="M5,0 0,2.5 5,5z" id="raphael-marker-block" style="-webkit-tap-highlight-color: rgba(0, 0, 0, 0);"></path>
                </svg>
                <h2><a name="t0"></a><a id="REST_0"></a>一、什么是REST？</h2> 
<h4><a name="t1"></a><a id="REST_1"></a>REST起源</h4> 
<p>REST是<strong>RE</strong>presentational <strong>S</strong>tate <strong>T</strong>ransfer的首字母缩写，它是1种接口架构的风格。罗伊·菲尔丁（Roy Fielding）于2000年在他的著名论文 <a href="https://www.ics.uci.edu/~fielding/pubs/dissertation/top.htm" rel="nofollow">Architectural Styles and the Design of Network-based Software Architectures</a> 中首次提出了<a href="https://so.csdn.net/so/search?q=REST%E6%9E%B6%E6%9E%84&amp;spm=1001.2101.3001.7020" target="_blank" class="hl hl-1" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.7020&quot;,&quot;dest&quot;:&quot;https://so.csdn.net/so/search?q=REST%E6%9E%B6%E6%9E%84&amp;spm=1001.2101.3001.7020&quot;,&quot;extra&quot;:&quot;{\&quot;searchword\&quot;:\&quot;REST架构\&quot;}&quot;}" data-tit="REST架构" data-pretit="rest架构">REST架构</a>风格的概念。</p> 
<blockquote> 
<p>Representational State Transfer 如果按意译可以理解为：构建于 <a href="https://so.csdn.net/so/search?q=HTTP%E8%AF%B7%E6%B1%82&amp;spm=1001.2101.3001.7020" target="_blank" class="hl hl-1" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.7020&quot;,&quot;dest&quot;:&quot;https://so.csdn.net/so/search?q=HTTP%E8%AF%B7%E6%B1%82&amp;spm=1001.2101.3001.7020&quot;,&quot;extra&quot;:&quot;{\&quot;searchword\&quot;:\&quot;HTTP请求\&quot;}&quot;}" data-tit="HTTP请求" data-pretit="http请求">HTTP请求</a>机制之上的一种通用接口技术。</p> 
</blockquote> 
<h4><a name="t2"></a><a id="RESTHTTP_5"></a><strong>REST与HTTP的关系</strong></h4> 
<p><strong>REST 不是网络协议，而是利用 HTTP协议实现的一套接口规则</strong>。但是REST没有严格定义消息接口名称与数据格式。而是利用 HTTP协议请求类型及消息参数定义。网络层传输的数据格式，采用JSON编码（即序列化），而json也是HTTP头部参数content-type规定的一种。<br> 可以认为 HTTP定义了各种网络功能元素规范及低层通信方式，<strong>REST专注于通过组合HTTP定义的各类功能元素来完成其目标：提供统一资源访问接口</strong>。</p> 
<p><strong>REST 安全性是基于HTTP的成熟安全机制</strong>，如HTTPS, TLS/SSL, OAuth, JWT token 等。</p> 
<p>所以说，<mark>REST与 HTTP 是 Hand-in-Hand 手拉手</mark> 的关系。这样，REST 就无须再定义一套详细接口标准，开发者也无须再熟悉一套新的接口规范，通过成熟的HTTP开发环境就可以实现REST接口规范的要求。也正是REST这个特点，使其出现后就非常受欢迎，特别是WEB 应用项目。当前前后端分离项目接口几乎都采用了 REST风格。<br> <img src="https://i-blog.csdnimg.cn/blog_migrate/84e6d487213b0fb70f91098d85a75d46.png#pic_center" alt="在这里插入图片描述"></p> 
<p>不对比没有感觉，使用过CORBA接口的工程师f都有这样的体会: <em>接口标准复杂的文档，对参数过于精细的定义，需要很多沟通，开发工具与测试工具的缺乏，新接手的人要熟悉很长一段时间</em>…</p> 
<p>而 REST 接口，只要理解了REST原理，熟悉http开发，就可以轻松定义接口、编程，无需过多交流，现有丰富的http测试工具与框架来高效率测试。因此，可以预见，<strong>REST在未来很长一段时间仍然是使用最广泛的应用层接口技术之一</strong>。</p> 
<blockquote> 
<p>REST也存在不足之处：传输速度不如采用<span class="words-blog hl-git-1" data-report-view="{&quot;spm&quot;:&quot;1001.2101.3001.10283&quot;,&quot;extra&quot;:&quot;{\&quot;words\&quot;:\&quot;TCP\&quot;}&quot;}" data-tit="TCP" data-pretit="tcp">TCP</span>的接口技术；REST 不支持长连接。因此，通信数据量大，对实时性要求高的场景，建议使用RPC、websocket，MessageQueue等接口技术。</p> 
</blockquote> 
<h4><a name="t3"></a><a id="RESTful_API_21"></a>RESTful API</h4> 
<p>与其他架构风格一样，REST 也有其指导原则和约束。满足 REST 服务接口也称为<code> RESTful API</code>。</p> 
<blockquote> 
<p>符合 REST 体系结构风格的 Web API（或 Web 服务）是 RESTful API。</p> 
</blockquote> 
<h4><a name="t4"></a><a id="RESTful__API__25"></a>RESTful API 接口技术的特点</h4> 
<ul><li>服务器的各类抽象数据都可以被称为资源(resource)</li><li>每一个资源都有唯一的资源标识(resource identifier)，对资源的操作不会改变这些标识</li><li>所有的操作都是无状态的, 即请求-响应结束，连接断开。</li><li>通过representation，即资源请求消息，来获取、添加、修改与删除资源.<br> 一条符合RESTful 的接口消息，称为 Representation，如<br> <code>GET: http://i92.168.1.100:8000/employee/1/</code><br> <img src="https://i-blog.csdnimg.cn/blog_migrate/d160202746b3369c5bf212cfe3ac4632.png" alt="在这里插入图片描述"></li></ul> 
<h2><a name="t5"></a><a id="REST__34"></a>二、REST 的指导原则</h2> 
<p>RESTful API 体系结构的六个指导原则是：</p> 
<h4><a name="t6"></a><a id="1_38"></a>1、统一接口</h4> 
<p>工作中常遇到两个系统对接时，需要定义接口，如果接口定义的很标准，能够很方便地重用于类似项目。基于此目的，软件行业内，定义了已经很多通用接口规范，如<code>SOA，CORBA， RPC</code> 等接口规范，都是通用的接口规范。REST的统一接口原则也是致力于在<code>HTTP</code>基础上建立一套标准化的接口指导规则(<em>为理解方便，姑且认为它也是一种规范</em>)。</p> 
<h4><a name="t7"></a><a id="2_41"></a>2、客户端-服务器模式</h4> 
<p>客户端-服务器设计模式实现业务分离，也有利于客户端和服务器<span class="edu-hl hl hl-1" data-report-view="{&quot;spm&quot;:&quot;1001.2101.3001.7020&quot;,&quot;extra&quot;:&quot;{\&quot;word\&quot;:\&quot;组件\&quot;}&quot;}" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.7020&quot;,&quot;extra&quot;:&quot;{\&quot;word\&quot;:\&quot;组件\&quot;}&quot;}" data-tit="组件" data-pretit="组件">组件</span>独立开发。</p> 
<h4><a name="t8"></a><a id="3_43"></a>3、无状态</h4> 
<p>就客户端每次请求时建立到服务器的连接，收到响应后就断开，<strong>不保持长连接</strong>，服务器不必跟踪每个客户端的连接状态。</p> 
<h4><a name="t9"></a><a id="4_46"></a>4、可缓存</h4> 
<p>可缓存约束要求Response结果可以隐式或显式地将标记为可缓存或不可缓存。<br> 如果响应是可缓存的，在有效时间内，服务器可以重用缓存数据，加快处理速度。</p> 
<h4><a name="t10"></a><a id="5_50"></a>5、分层系统</h4> 
<p>在分层系统中，每个组件都无法看到它们与之交互的直接层之外的内容。<img src="https://i-blog.csdnimg.cn/blog_migrate/d349da8671ea334ee851be38e408291d.png" alt="在这里插入图片描述"></p> 
<h4><a name="t11"></a><a id="6_52"></a>6、跨语言，跨平台特性</h4> 
<p>REST支持跨语言，跨平台，可按需编程。 客户端可以采用java, C++, python, 还可以通过AJAX <span class="words-blog hl-git-1" data-report-view="{&quot;spm&quot;:&quot;1001.2101.3001.10283&quot;,&quot;extra&quot;:&quot;{\&quot;words\&quot;:\&quot;Javascript\&quot;}&quot;}" data-tit="Javascript" data-pretit="javascript">Javascript</span> 方式很方便扩展客户端功能。</p> 
<h2><a name="t12"></a><a id="_RESTful__55"></a>三、实现 RESTful 接口的关键要素</h2> 
<p>下面列出了实现RESTful接口的关键要素</p> 
<h4><a name="t13"></a><a id="1__58"></a>1. 遵循通用的资源命名方式</h4> 
<p>采用标准化的资源命令方式，使开发人员容易理解，保持一致：</p> 
<pre data-index="0" class="set-code-show prettyprint"><code class="has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;">GET：http://www.test.com/app_name/resource_type/resource_id/
GET：http://www.test.com/version_number/resource_type/resource_id/
<div class="hljs-button {2} add_def" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li></ul><button class="btn-code-notes mdeditor" data-report-click="{&quot;spm&quot;:&quot;3001.10436&quot;,&quot;extra&quot;:{&quot;index&quot;:0,&quot;runIdx&quot;:-1}}" style="">代码解读</button></pre> 
<p>如: 某web 服务器上数据库上存在 employee 表，服务器的 URL 为： <code>http://demo.example.com</code>, 则访问员工1001数据的REST接口的URL为: <code>http://demo.example.com/v1/employee/1001/</code></p> 
<h4><a name="t14"></a><a id="2__69"></a>2. 访问资源方法与请求动词的对应关系</h4> 
<p>在应用端的资源操作方法，常见的就是数据库CRUD增删改查操作，而请求动词，应用层告知HTTP协议的使用何种方法发送请求，REST的做法是，将CRUD操作与HTTP请求动词建立对应关系。</p> 
<p>下面列出了<strong>最常用的5种REST API 对应关系</strong>: <em>2条显示类API, 3条编辑类API</em></p> 
<div class="table-box"><table><thead><tr><th>操作</th><th>HTTP请求动词</th></tr></thead><tbody><tr><td>query all 查询全部数据</td><td>GET</td></tr><tr><td>Retrieve查询单条数据</td><td>GET ( url要带 id参数）</td></tr><tr><td>Create 新增1条数据</td><td>POST ( url要带 id参数）</td></tr><tr><td>Update 更新1条数据</td><td>PUT ( url要带 id参数）</td></tr><tr><td>Delete/Destroy 删除1条数据</td><td>DELETE ( url要带 id参数）</td></tr></tbody></table></div> 
<blockquote> 
<p>HTTP PATCH 请求方法用于更新资源部分数据，但通常使用PUT方法，PATCH很少使用，故可忽略。</p> 
</blockquote> 
<p>例如，服务器收到 <code>GET: http://i92.168.1.100:8000/employee/1/</code> 消息，就知道客户要查询 employee表 id=1 单条记录数据。<br> 这样REST就借助 HTTP 协议完成了1次查询请求。不需要像 SOA以及gRPC那样，定义一套新的接口规范与序列化规范。因此 REST 接口技术降低了学习成本与开发难度.<br> <img src="https://i-blog.csdnimg.cn/blog_migrate/24f23398ba0935c080da86e0ef597c88.png" alt="在这里插入图片描述"><br> 再如: 发送1条<code>POST：http://192.168.3.100/employee/</code>, 表示要新增1条记录。</p> 
<h4><a name="t15"></a><a id="3_Request_Headers__88"></a>3. <span class="words-blog hl-git-1" data-report-view="{&quot;spm&quot;:&quot;1001.2101.3001.10283&quot;,&quot;extra&quot;:&quot;{\&quot;words\&quot;:\&quot;Request\&quot;}&quot;}" data-tit="Request" data-pretit="request">Request</span> Headers 清求头设置</h4> 
<p>在request header 中可以增加一些附加信息，如<code> response type, authorization details</code>等。<code>content-type</code>通常设置为 <code>application/json</code></p> 
<h4><a name="t16"></a><a id="4_Request_Body_91"></a>4. Request Body</h4> 
<p>使用get, delete请求数据时，通常不需要参数，查询单条记录，用url路径参数即可，如前面示例中的 <code>GET: http://i92.168.1.100:8000/employee/1/</code> ， url path为 <code>/employee/&lt;id: int&gt;</code>.<br> 当增加、修改数据时, 相关数据放在 post,put请求参数中。<br> 鉴权参数通常保存在Authorization 头部参数，或者cookies中。</p> 
<h4><a name="t17"></a><a id="5Response_body_96"></a>5.Response body</h4> 
<p>response 把资源数据以json格式放在body里返回给用户</p> 
<h4><a name="t18"></a><a id="6Response_Status_codes__99"></a>6、Response Status codes 响应状态码</h4> 
<p>按http response 建议，正确设置响应消息中的状态码，方便客户端据此操作。</p> 
<h2><a name="t19"></a><a id="DjangoRESTFramework__102"></a>四、Django-REST-Framework 开发框架介绍</h2> 
<p>现在，我们已经了解了，REST 是一套基于HTTP的接口规则，主要用于数据库等资源的远程CRUD操作。选择REST开发框架也就有了1个初步认识：<br> 1） 首先开发框架必须支持HTTP get, post, put, delete 请求接收与响应等处理。<br> 2) 提供方便的资源访问支持，如数据库访问接口<br> 3） 提供 json序列化，反序列化功能</p> 
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/d07c89266915ca7b44e28f6beb25247c.png" alt="在这里插入图片描述"></p> 
<h3><a name="t20"></a><a id="1_REST__109"></a>1、使用流行的 REST 开发框架</h3> 
<p>所以各类语言都可以提供支持上述3点的现成开发框架，如 Java的Sprint Boot, Python 的 django/Flask, C++ REST sdk等，甚至javascript可以实现REST接口服务，如<span class="words-blog hl-git-1" data-report-view="{&quot;spm&quot;:&quot;1001.2101.3001.10283&quot;,&quot;extra&quot;:&quot;{\&quot;words\&quot;:\&quot;Node.js\&quot;}&quot;}" data-tit="Node.js" data-pretit="node.js">Node.js</span> express 等。</p> 
<p>基于框架，开发REST API主要工作是：<br> (1) 设计 REST API 接口，包括URL路径，url请求参数，返回参数等。<br> (2) 后端将各类请求消息对应到CRUD操作，提供数据并进行序列化操作，将结果返回给客户端。<br> (3) 提供API文档页面、测试页面，方便其它开发人员阅读与测试。</p> 
<p>设计REST API，可以利用成熟的工具来完成，如 SwaggerUI等。</p> 
<h3><a name="t21"></a><a id="2DjangoRESTFramework__119"></a>2、Django-REST-Framework 框架的优点</h3> 
<p>REST开发，选择成熟的第3方REST开发框架，能够极大提高开发效率。如 Django REST Framework，内置了Serialization类、通用视图类，具有许多其它框架没有的优点：</p> 
<h4><a name="t22"></a><a id="1__121"></a>1） 代码简洁、效率高</h4> 
<p>比如，只需要 6 条语句实现1条资源的 get, post, put, delete API, 并且提供便捷的测试页面</p> 
<pre data-index="1" class="set-code-show prettyprint"><code class="prism language-py has-numbering" onclick="mdcp.copyCode(event)" style="position: unset;"><span class="token keyword">class</span> <span class="token class-name">CompanyList</span><span class="token punctuation">(</span>generics<span class="token punctuation">.</span>ListCreateAPIView<span class="token punctuation">)</span><span class="token punctuation">:</span>
queryset <span class="token operator">=</span> Company<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
serializer_class <span class="token operator">=</span> CompanySerializer


<span class="token keyword">class</span> <span class="token class-name">CompanyDetail</span><span class="token punctuation">(</span>generics<span class="token punctuation">.</span>RetrieveUpdateDestroyAPIView<span class="token punctuation">)</span><span class="token punctuation">:</span>
queryset <span class="token operator">=</span> Company<span class="token punctuation">.</span>objects<span class="token punctuation">.</span><span class="token builtin">all</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
serializer_class <span class="token operator">=</span> CompanySerializer
<div class="hljs-button {2} add_def" data-title="复制"></div></code><ul class="pre-numbering" style=""><li style="color: rgb(153, 153, 153);">1</li><li style="color: rgb(153, 153, 153);">2</li><li style="color: rgb(153, 153, 153);">3</li><li style="color: rgb(153, 153, 153);">4</li><li style="color: rgb(153, 153, 153);">5</li><li style="color: rgb(153, 153, 153);">6</li><li style="color: rgb(153, 153, 153);">7</li><li style="color: rgb(153, 153, 153);">8</li></ul><button class="btn-code-notes mdeditor" data-report-click="{&quot;spm&quot;:&quot;3001.10436&quot;,&quot;extra&quot;:{&quot;index&quot;:1,&quot;runIdx&quot;:-1}}" style="">代码解读</button></pre> 
<p><img src="https://i-blog.csdnimg.cn/blog_migrate/de67312a3e3fc60aaff5a54865e73f0d.png#pic_center" alt="在这里插入图片描述"><br> 具体实现过程，可以参考 <a href="https://blog.csdn.net/captain5339/article/details/131572762">Django-Rest-Framework 库实现REST API的实例代码</a></p> 
<h4><a name="t23"></a><a id="2_API__137"></a>2）自动生成标准格式的 API 文档页面</h4> 
<p>Djiango Rest Framework 可以自动生成流行的 Swagger API 文档格式，DRF内置API Document 格式，均支持API 文档、检索、测试等。<br> <img src="https://i-blog.csdnimg.cn/blog_migrate/d27fb969e58f572330bddf22c3728c4d.png" alt="在这里插入图片描述"></p> 
<h4><a name="t24"></a><a id="3_Django__140"></a>3) Django 本身提供了完善的用户认证、权限管理模块</h4> 
<p>Django 内置Auth模块提供了基本鉴权、普通 token，JWT token等用户认证功能，也可通过第3方模块实现OAuth认证。<br> 内置的Auth还提供了全面的API 级别、模型级、行级数据的权限控制功能，也可集成第3方库实现字段级的权限控制。<br> 对商业项目来说，鉴权与权限管理功能，是至关重要的基础功能，对于 Django-REST-Framework 来说，这是一项轻而易举的功能。</p> 
<h4><a name="t25"></a><a id="4_DjangoORM_145"></a>4） Django内置ORM功能</h4> 
<p>由于内置了ORM功能，迁移数据库是一项较为容易的工作。 对于项目未来的扩展，这是一项需要认真考虑的条件。</p> 
<h3><a name="t26"></a><a id="3Django__148"></a>3、Django 内置了<span class="edu-hl hl hl-1" data-report-view="{&quot;spm&quot;:&quot;1001.2101.3001.7020&quot;,&quot;extra&quot;:&quot;{\&quot;word\&quot;:\&quot;自动化测试\&quot;}&quot;}" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.7020&quot;,&quot;extra&quot;:&quot;{\&quot;word\&quot;:\&quot;自动化测试\&quot;}&quot;}" data-tit="自动化测试" data-pretit="自动化测试">自动化测试</span>功能</h3> 
<p>Django 内置了自动化测试功能，提供了unittest 测试类，还提供了1个模拟客户端。测试动态页面。还可以便引入 selenium, playwright 等库来测试。<br> DRF内置 API Document 模块还可自动生成测试代码：<br> <img src="https://i-blog.csdnimg.cn/blog_migrate/22f76f1130f0a6832937098370ad30b1.png" alt="在这里插入图片描述"><br> Python是编写自动化测试代码效率最高的语言，没有之一。 DRF项目的API测试应该采用自动化测试，不但开发效率高，还可以有效节省测试成本。</p> 
<h3><a name="t27"></a><a id="4DRF_155"></a>4、DRF与其它框架相比</h3> 
<h4><a name="t28"></a><a id="FlaskRESTful__156"></a>与Flask-RESTful 相比</h4> 
<p>Flask开发REST API 接口本身非常便捷，部署也更容易。但对于商业项目、比较大的项目来说，是否能提供页面测试功能、标准API文档、完善的鉴权与权限管理等功能是必不可少的需求，而实现这些功能，对于Flask 太麻烦了。<br> 对于开发商业前后端分离项目来说，相比Flask-RESTful, 选择Django-REST-Framework来开发REST API 是正确的选择。除非不需要前面提到的功能，Flask-RESTful 也是不错的选择。</p> 
<h4><a name="t29"></a><a id="Spring_Boot__160"></a>与Spring Boot 相比</h4> 
<p>前面提到的功能，Spring Boot 实现起来，也需要导入第3方依赖，做很多配置与开发才能实现，特别是行级、字段级权限管理。在开发效率上远不及Django, 当然Spring Boot 的优点是运行速度快一些。 此外，高水平django开发人员远不及Spring Boot多，所以项目预算充足，时间不紧，Spring Boot 是比较好的选择。 但对于小公司，Django-REST-Framework 是更好选择。</p> 
<h4><a name="t30"></a><a id="_nodejs_express_163"></a>与 node.js express相比</h4> 
<p>Node.js 生态圈近几年发展迅速，express 开发效率也很高。 适合于纯数据库CRUD的项目，或用于替代php，项目的开发人员也容易同时上手前后端开发。但开发鉴权、权限管理、自动化测试代码，效率还是明显不如 Django。如果项目还需要对数据进行各种清洗、处理，还需要与访问其它系统，如<span class="edu-hl hl hl-1" data-report-view="{&quot;spm&quot;:&quot;1001.2101.3001.7020&quot;,&quot;extra&quot;:&quot;{\&quot;word\&quot;:\&quot;硬件\&quot;}&quot;}" data-report-click="{&quot;spm&quot;:&quot;1001.2101.3001.7020&quot;,&quot;extra&quot;:&quot;{\&quot;word\&quot;:\&quot;硬件\&quot;}&quot;}" data-tit="硬件" data-pretit="硬件">硬件</span>、TCP/UDP、图像处理等，这种情况下，应该毫无疑问，django 才能胜任。</p> 
<h4><a name="t31"></a><a id="_C_REST_SDK__166"></a>与 C++ REST SDK 相比</h4> 
<p>通常 C++程序的运行速度是最快的，大部分项目并不需要这种优势，除非项目需求中，要求支持很高的API 访问量，对成本还有限制，否则不推荐采用 C++ REST SDK 来开发。多放几台服务器的硬件成本肯定比养C++程序员的成本低。</p>
            </div><div data-report-view="{&quot;mod&quot;:&quot;1585297308_001&quot;,&quot;spm&quot;:&quot;1001.2101.3001.6548&quot;,&quot;dest&quot;:&quot;https://blog.csdn.net/captain5339/article/details/129634669&quot;,&quot;extend1&quot;:&quot;pc&quot;,&quot;ab&quot;:&quot;new&quot;}"><div></div></div>
            <link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/editerView/markdown_views-f23dff6052.css" rel="stylesheet">
            <link href="https://csdnimg.cn/release/blogv2/dist/mdeditor/css/style-e504d6a974.css" rel="stylesheet">
    </div>